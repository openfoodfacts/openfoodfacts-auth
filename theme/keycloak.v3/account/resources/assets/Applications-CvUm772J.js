import{jsx as s,jsxs as n,Fragment as L}from"react/jsx-runtime";import{f as $,h as v,B as E,z as P,A as k,u as G,_ as S,a as O,S as R,P as j,Z as y,C as M,F as B,G as _,d as A,U as F,H,J as V}from"./main-C-7qXKOl.js";import*as m from"react";import{useState as C}from"react";import{f as q}from"./formatDate-Q2TxKE95.js";import{u as z}from"./useAccountAlerts-C1KqfYJi.js";import{s as b,D as J,a as U,b as N}from"./DataListItemRow-ChqOA6ly.js";import{D as w,a as d}from"./DataListItemCells-DZ_JTsDa.js";import{D as K,a as Z,b as r,c as l,d as a}from"./DescriptionListTerm-DN_DUfZv.js";import{I as Q}from"./info-alt-icon-B2xMYy9D.js";import"react-dom";const D=t=>{var{className:h="",isExpanded:g=!1,"aria-controls":f="","aria-label":c="Details",rowid:u="",id:o,buttonProps:p}=t,I=$(t,["className","isExpanded","aria-controls","aria-label","rowid","id","buttonProps"]);return m.createElement("div",Object.assign({className:v(b.dataListItemControl,h)},I),m.createElement("div",{className:v(b.dataListToggle)},m.createElement(E,Object.assign({id:o,variant:P.plain,"aria-controls":f!==""&&f,"aria-label":c,"aria-labelledby":c!=="Details"?null:`${u} ${o}`,"aria-expanded":g},p),m.createElement("div",{className:v(b.dataListToggleIcon)},m.createElement(k,null)))))};D.displayName="DataListToggle";const ae=()=>{const{t}=G(),h=S(),{addAlert:g,addError:f}=z(),[c,u]=C(),[o,p]=C(1),I=()=>p(o+1);O(e=>V({signal:e,context:h}),e=>u(e.map(i=>({...i,open:!1}))),[o]);const x=e=>{u([...c.map(i=>i.clientId===e?{...i,open:!i.open}:i)])},T=async e=>{try{await H(h,e),I(),g(t("removeConsentSuccess"))}catch(i){f("removeConsentError",i)}};return c?s(j,{title:t("application"),description:t("applicationsIntroMessage"),children:n(J,{id:"applications-list","aria-label":t("application"),children:[s(U,{id:"applications-list-header","aria-labelledby":"Columns names",children:n(N,{children:[s("span",{style:{visibility:"hidden",height:55},children:s(D,{id:"applications-list-header-invisible-toggle","aria-controls":"applications-list-content"})}),s(w,{dataListCells:[s(d,{width:2,className:"pf-v5-u-pt-md",children:s("strong",{children:t("name")})},"applications-list-client-id-header"),s(d,{width:2,className:"pf-v5-u-pt-md",children:s("strong",{children:t("applicationType")})},"applications-list-app-type-header"),s(d,{width:2,className:"pf-v5-u-pt-md",children:s("strong",{children:t("status")})},"applications-list-status")]})]})}),c.map(e=>n(U,{"aria-labelledby":"applications-list","data-testid":"applications-list-item",isExpanded:e.open,children:[n(N,{className:"pf-v5-u-align-items-center",children:[s(D,{onClick:()=>x(e.clientId),isExpanded:e.open,id:`toggle-${e.clientId}`,"aria-controls":`content-${e.clientId}`}),s(w,{className:"pf-v5-u-align-items-center",dataListCells:[n(d,{width:2,children:[e.effectiveUrl&&n(E,{className:"pf-v5-u-pl-0 title-case",component:"a",variant:"link",onClick:()=>window.open(e.effectiveUrl),children:[y(t,e.clientName||e.clientId)," ",s(M,{})]}),!e.effectiveUrl&&s(L,{children:y(t,e.clientName||e.clientId)})]},`client${e.clientId}`),n(d,{width:2,children:[e.userConsentRequired?t("thirdPartyApp"):t("internalApp"),e.offlineAccess?", "+t("offlineAccess"):""]},`internal${e.clientId}`),s(d,{width:2,children:e.inUse?t("inUse"):t("notInUse")},`status${e.clientId}`)]})]}),n(K,{id:`content-${e.clientId}`,className:"pf-v5-u-pl-4xl","aria-label":t("applicationDetails",{clientId:e.clientId}),isHidden:!e.open,children:[n(Z,{children:[n(r,{children:[s(l,{children:t("client")}),s(a,{children:e.clientId})]}),e.description&&n(r,{children:[s(l,{children:t("description")}),s(a,{children:e.description})]}),e.effectiveUrl&&n(r,{children:[s(l,{children:"URL"}),s(a,{children:e.effectiveUrl.split('"')})]}),e.consent&&n(L,{children:[n(r,{children:[s(l,{children:t("hasAccessTo")}),e.consent.grantedScopes.map(i=>n(a,{children:[s(B,{})," ",t(i.name)]},`scope${i.id}`))]}),e.tosUri&&n(r,{children:[s(l,{children:t("termsOfService")}),s(a,{children:e.tosUri})]}),e.policyUri&&n(r,{children:[s(l,{children:t("privacyPolicy")}),s(a,{children:e.policyUri})]}),e.logoUri&&n(r,{children:[s(l,{children:t("logo")}),s(a,{children:s("img",{src:e.logoUri})})]}),n(r,{children:[s(l,{children:t("accessGrantedOn")}),s(a,{children:q(new Date(e.consent.createdDate))})]})]})]}),(e.consent||e.offlineAccess)&&n(_,{hasGutter:!0,children:[s("hr",{}),s(A,{children:s(F,{buttonTitle:t("removeAccess"),modalTitle:t("removeAccess"),continueLabel:t("confirm"),cancelLabel:t("cancel"),buttonVariant:"secondary",onContinue:()=>T(e.clientId),children:t("removeModalMessage",{name:e.clientId})})}),n(A,{children:[s(Q,{})," ",t("infoMessage")]})]})]})]},e.clientId))]})}):s(R,{})};export{ae as Applications,ae as default};
//# sourceMappingURL=Applications-CvUm772J.js.map
