{"version":3,"file":"methods-Dy8SR3w6.js","sources":["../../src/api/methods.ts"],"sourcesContent":["import {\n  BaseEnvironment,\n  type KeycloakContext,\n} from \"@keycloak/keycloak-ui-shared\";\n\nimport { joinPath } from \"../utils/joinPath\";\nimport { parseResponse } from \"./parse-response\";\nimport {\n  ClientRepresentation,\n  CredentialContainer,\n  DeviceRepresentation,\n  Group,\n  LinkedAccountRepresentation,\n  Permission,\n  UserRepresentation,\n} from \"./representations\";\nimport { request } from \"./request\";\n\nexport type CallOptions = {\n  context: KeycloakContext<BaseEnvironment>;\n  signal?: AbortSignal;\n};\n\nexport type PaginationParams = {\n  first: number;\n  max: number;\n};\n\nexport async function getPersonalInfo({\n  signal,\n  context,\n}: CallOptions): Promise<UserRepresentation> {\n  const response = await request(\"/?userProfileMetadata=true\", context, {\n    signal,\n  });\n  return parseResponse<UserRepresentation>(response);\n}\n\nexport async function getSupportedLocales({\n  signal,\n  context,\n}: CallOptions): Promise<string[]> {\n  const response = await request(\"/supportedLocales\", context, { signal });\n  return parseResponse<string[]>(response);\n}\n\nexport async function savePersonalInfo(\n  context: KeycloakContext<BaseEnvironment>,\n  info: UserRepresentation,\n): Promise<void> {\n  const response = await request(\"/\", context, { body: info, method: \"POST\" });\n  if (!response.ok) {\n    const { errors } = await response.json();\n    throw errors;\n  }\n  return undefined;\n}\n\nexport async function getPermissionRequests(\n  resourceId: string,\n  { signal, context }: CallOptions,\n): Promise<Permission[]> {\n  const response = await request(\n    `/resources/${resourceId}/permissions/requests`,\n    context,\n    { signal },\n  );\n\n  return parseResponse<Permission[]>(response);\n}\n\nexport async function getDevices({\n  signal,\n  context,\n}: CallOptions): Promise<DeviceRepresentation[]> {\n  const response = await request(\"/sessions/devices\", context, { signal });\n  return parseResponse<DeviceRepresentation[]>(response);\n}\n\nexport async function getApplications({\n  signal,\n  context,\n}: CallOptions): Promise<ClientRepresentation[]> {\n  const response = await request(\"/applications\", context, { signal });\n  return parseResponse<ClientRepresentation[]>(response);\n}\n\nexport async function deleteConsent(\n  context: KeycloakContext<BaseEnvironment>,\n  id: string,\n) {\n  return request(`/applications/${id}/consent`, context, { method: \"DELETE\" });\n}\n\nexport async function deleteSession(\n  context: KeycloakContext<BaseEnvironment>,\n  id?: string,\n) {\n  return request(`/sessions${id ? `/${id}` : \"\"}`, context, {\n    method: \"DELETE\",\n  });\n}\n\nexport async function getCredentials({ signal, context }: CallOptions) {\n  const response = await request(\"/credentials\", context, {\n    signal,\n  });\n  return parseResponse<CredentialContainer[]>(response);\n}\n\nexport async function getLinkedAccounts({ signal, context }: CallOptions) {\n  const response = await request(\"/linked-accounts\", context, { signal });\n  return parseResponse<LinkedAccountRepresentation[]>(response);\n}\n\nexport async function unLinkAccount(\n  context: KeycloakContext<BaseEnvironment>,\n  account: LinkedAccountRepresentation,\n) {\n  const response = await request(\n    \"/linked-accounts/\" + account.providerName,\n    context,\n    {\n      method: \"DELETE\",\n    },\n  );\n  if (response.ok) return;\n  return parseResponse(response);\n}\n\nexport async function linkAccount(\n  context: KeycloakContext<BaseEnvironment>,\n  account: LinkedAccountRepresentation,\n) {\n  const redirectUri = encodeURIComponent(\n    joinPath(\n      context.environment.serverBaseUrl,\n      \"realms\",\n      context.environment.realm,\n      \"account\",\n    ),\n  );\n  const response = await request(\n    \"/linked-accounts/\" + account.providerName,\n    context,\n    {\n      searchParams: { providerId: account.providerName, redirectUri },\n    },\n  );\n  return parseResponse<{ accountLinkUri: string }>(response);\n}\n\nexport async function getGroups({ signal, context }: CallOptions) {\n  const response = await request(\"/groups\", context, {\n    signal,\n  });\n  return parseResponse<Group[]>(response);\n}\n"],"names":["getPersonalInfo","signal","context","response","request","parseResponse","getSupportedLocales","savePersonalInfo","info","errors","getPermissionRequests","resourceId","getDevices","getApplications","deleteConsent","id","deleteSession","getCredentials","getLinkedAccounts","unLinkAccount","account","linkAccount","redirectUri","joinPath","getGroups"],"mappings":"sFA4BA,eAAsBA,EAAgB,CACpC,OAAAC,EACA,QAAAC,CACF,EAA6C,CAC3C,MAAMC,EAAW,MAAMC,EAAQ,6BAA8BF,EAAS,CACpE,OAAAD,CAAA,CACD,EACD,OAAOI,EAAkCF,CAAQ,CACnD,CAEA,eAAsBG,EAAoB,CACxC,OAAAL,EACA,QAAAC,CACF,EAAmC,CACjC,MAAMC,EAAW,MAAMC,EAAQ,oBAAqBF,EAAS,CAAE,OAAAD,EAAQ,EACvE,OAAOI,EAAwBF,CAAQ,CACzC,CAEsB,eAAAI,EACpBL,EACAM,EACe,CACT,MAAAL,EAAW,MAAMC,EAAQ,IAAKF,EAAS,CAAE,KAAMM,EAAM,OAAQ,MAAA,CAAQ,EACvE,GAAA,CAACL,EAAS,GAAI,CAChB,KAAM,CAAE,OAAAM,CAAW,EAAA,MAAMN,EAAS,KAAK,EACjC,MAAAM,CACR,CAEF,CAEA,eAAsBC,EACpBC,EACA,CAAE,OAAAV,EAAQ,QAAAC,GACa,CACvB,MAAMC,EAAW,MAAMC,EACrB,cAAcO,CAAU,wBACxBT,EACA,CAAE,OAAAD,CAAO,CAAA,EAGX,OAAOI,EAA4BF,CAAQ,CAC7C,CAEA,eAAsBS,EAAW,CAC/B,OAAAX,EACA,QAAAC,CACF,EAAiD,CAC/C,MAAMC,EAAW,MAAMC,EAAQ,oBAAqBF,EAAS,CAAE,OAAAD,EAAQ,EACvE,OAAOI,EAAsCF,CAAQ,CACvD,CAEA,eAAsBU,EAAgB,CACpC,OAAAZ,EACA,QAAAC,CACF,EAAiD,CAC/C,MAAMC,EAAW,MAAMC,EAAQ,gBAAiBF,EAAS,CAAE,OAAAD,EAAQ,EACnE,OAAOI,EAAsCF,CAAQ,CACvD,CAEsB,eAAAW,EACpBZ,EACAa,EACA,CACO,OAAAX,EAAQ,iBAAiBW,CAAE,WAAYb,EAAS,CAAE,OAAQ,SAAU,CAC7E,CAEsB,eAAAc,EACpBd,EACAa,EACA,CACO,OAAAX,EAAQ,YAAYW,EAAK,IAAIA,CAAE,GAAK,EAAE,GAAIb,EAAS,CACxD,OAAQ,QAAA,CACT,CACH,CAEA,eAAsBe,EAAe,CAAE,OAAAhB,EAAQ,QAAAC,GAAwB,CACrE,MAAMC,EAAW,MAAMC,EAAQ,eAAgBF,EAAS,CACtD,OAAAD,CAAA,CACD,EACD,OAAOI,EAAqCF,CAAQ,CACtD,CAEA,eAAsBe,EAAkB,CAAE,OAAAjB,EAAQ,QAAAC,GAAwB,CACxE,MAAMC,EAAW,MAAMC,EAAQ,mBAAoBF,EAAS,CAAE,OAAAD,EAAQ,EACtE,OAAOI,EAA6CF,CAAQ,CAC9D,CAEsB,eAAAgB,EACpBjB,EACAkB,EACA,CACA,MAAMjB,EAAW,MAAMC,EACrB,oBAAsBgB,EAAQ,aAC9BlB,EACA,CACE,OAAQ,QACV,CAAA,EAEF,GAAI,CAAAC,EAAS,GACb,OAAOE,EAAcF,CAAQ,CAC/B,CAEsB,eAAAkB,EACpBnB,EACAkB,EACA,CACA,MAAME,EAAc,mBAClBC,EACErB,EAAQ,YAAY,cACpB,SACAA,EAAQ,YAAY,MACpB,SACF,CAAA,EAEIC,EAAW,MAAMC,EACrB,oBAAsBgB,EAAQ,aAC9BlB,EACA,CACE,aAAc,CAAE,WAAYkB,EAAQ,aAAc,YAAAE,CAAY,CAChE,CAAA,EAEF,OAAOjB,EAA0CF,CAAQ,CAC3D,CAEA,eAAsBqB,EAAU,CAAE,OAAAvB,EAAQ,QAAAC,GAAwB,CAChE,MAAMC,EAAW,MAAMC,EAAQ,UAAWF,EAAS,CACjD,OAAAD,CAAA,CACD,EACD,OAAOI,EAAuBF,CAAQ,CACxC"}