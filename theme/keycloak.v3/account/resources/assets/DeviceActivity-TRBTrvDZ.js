import{jsx as e,jsxs as i}from"react/jsx-runtime";import{c as A,u as T,K as N,a as M,S as V,P as z,T as G,B as P,b as H,W as b,G as W,d as m,g as E,e as v,t as K}from"./main-VxsXDFHF.js";import{useState as w}from"react";import{f}from"./formatDate-CES5abZl.js";import{u as j}from"./useAccountAlerts-ChKJBvtE.js";import{S as B,a as I}from"./SplitItem-CjZ7qwfd.js";import{D as $,a as F,b as R}from"./DataListItemRow-Jpdz-uSV.js";import{D as q,a as J,b as a,c as o,d as l}from"./DescriptionListTerm-CAoPCJLR.js";import{L as Q}from"./Label-DfTZiadY.js";import"react-dom";const U={name:"DesktopIcon",height:512,width:576,svgPath:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z",yOffset:0,xOffset:0},X=A(U),Y={name:"MobileAltIcon",height:512,width:320,svgPath:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z",yOffset:0,xOffset:0},Z=A(Y),de=()=>{const{t:n}=T(),d=N(),{addAlert:L,addError:S}=j(),[h,x]=w(),[u,O]=w(0),D=()=>O(u+1);M(s=>E({signal:s,context:d}),s=>{let t=s[0];const r=s.findIndex(g=>g.current);t=s.splice(r,1)[0],s.unshift(t);const p=t.sessions.findIndex(g=>g.current),c=t.sessions.splice(p,1)[0];t.sessions.unshift(c),x(s)},[u]);const C=async()=>{await v(d),d.keycloak.logout()},y=async(s,t)=>{try{await v(d,s.id),L(n("signedOutSession",{browser:s.browser,os:t.os})),D()}catch(r){S("errorSignOutMessage",r)}},k=s=>{let t="";return s.forEach((r,p)=>{let c;r.clientName!==""?c=K(n,r.clientName):c=r.clientId,t+=c,s.length>p+1&&(t+=", ")}),t};return h?i(z,{title:n("deviceActivity"),description:n("signedInDevicesExplanation"),children:[i(B,{hasGutter:!0,className:"pf-v5-u-mb-lg",children:[e(I,{isFilled:!0,children:e(G,{headingLevel:"h2",size:"xl",children:n("signedInDevices")})}),i(I,{children:[e(P,{id:"refresh-page",variant:"link",onClick:()=>D(),icon:e(H,{}),children:n("refreshPage")}),(h.length>1||h[0].sessions.length>1)&&e(b,{buttonTitle:n("signOutAllDevices"),modalTitle:n("signOutAllDevices"),continueLabel:n("confirm"),cancelLabel:n("cancel"),onContinue:()=>C(),children:n("signOutAllDevicesWarning")})]})]}),e($,{className:"signed-in-device-list","aria-label":n("signedInDevices"),children:e(F,{"aria-labelledby":`sessions-${u}`,children:h.map(s=>s.sessions.map((t,r)=>e(R,{"data-testid":`row-${r}`,children:e(q,{"aria-label":"device-sessions-content",className:"pf-v5-u-flex-grow-1",children:i(W,{hasGutter:!0,children:[e(m,{span:1,rowSpan:2,children:s.mobile?e(Z,{}):e(X,{})}),i(m,{sm:8,md:9,span:10,children:[i("span",{className:"pf-v5-u-mr-md session-title",children:[s.os.toLowerCase().includes("unknown")?n("unknownOperatingSystem"):s.os," ",!s.osVersion.toLowerCase().includes("unknown")&&s.osVersion," ","/ ",t.browser]}),t.current&&e(Q,{color:"green",children:n("currentSession")})]}),e(m,{className:"pf-v5-u-text-align-right",sm:3,md:2,span:1,children:!t.current&&e(b,{buttonTitle:n("signOut"),modalTitle:n("signOut"),continueLabel:n("confirm"),cancelLabel:n("cancel"),buttonVariant:"secondary",onContinue:()=>y(t,s),children:n("signOutWarning")})}),e(m,{span:11,children:i(J,{className:"signed-in-device-grid",columnModifier:{sm:"2Col",lg:"3Col"},cols:5,rows:1,children:[i(a,{children:[e(o,{children:n("ipAddress")}),e(l,{children:t.ipAddress})]}),i(a,{children:[e(o,{children:n("lastAccessedOn")}),e(l,{children:f(new Date(t.lastAccess*1e3))})]}),i(a,{children:[e(o,{children:n("clients")}),e(l,{children:k(t.clients)})]}),i(a,{children:[e(o,{children:n("started")}),e(l,{children:f(new Date(t.started*1e3))})]}),i(a,{children:[e(o,{children:n("expires")}),e(l,{children:f(new Date(t.expires*1e3))})]})]})})]})})},s.id)))})})]}):e(V,{})};export{de as DeviceActivity,de as default};
//# sourceMappingURL=DeviceActivity-TRBTrvDZ.js.map
