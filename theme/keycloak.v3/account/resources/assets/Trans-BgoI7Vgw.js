import{createElement as N,isValidElement as I,Fragment as J,cloneElement as Q,Children as X,useContext as Y}from"react";import{aN as Z,aO as q,aP as G,aQ as F,aR as H,aS as D,aT as W,aU as U}from"./main-VxsXDFHF.js";var _={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const R=Z(_);var ee=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(R[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var i=e.indexOf("-->");return{type:"comment",comment:i!==-1?e.slice(4,i):""}}for(var h=new RegExp(ee),s=null;(s=h.exec(e))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),f=[o,""];o.indexOf("=")>-1&&(f=o.split("=")),n.attrs[f[0]]=f[1],h.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var te=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ne=/^\s*$/,se=Object.create(null);function K(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var i=[];for(var h in t)i.push(h+'="'+t[h]+'"');return i.length?" "+i.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(K,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var re={parse:function(e,n){n||(n={}),n.components||(n.components=se);var t,i=[],h=[],s=-1,o=!1;if(e.indexOf("<")!==0){var f=e.indexOf("<");i.push({type:"text",content:f===-1?e:e.substring(0,f)})}return e.replace(te,function(l,v){if(o){if(l!=="</"+t.name+">")return;o=!1}var d,g=l.charAt(1)!=="/",k=l.startsWith("<!--"),b=v+l.length,c=e.charAt(b);if(k){var O=P(l);return s<0?(i.push(O),i):((d=h[s]).children.push(O),i)}if(g&&(s++,(t=P(l)).type==="tag"&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!c||c==="<"||t.children.push({type:"text",content:e.slice(b,e.indexOf("<",b))}),s===0&&i.push(t),(d=h[s-1])&&d.children.push(t),h[s]=t),(!g||t.voidElement)&&(s>-1&&(t.voidElement||t.name===l.slice(2,-1))&&(s--,t=s===-1?i:h[s]),!o&&c!=="<"&&c)){d=s===-1?i:h[s].children;var a=e.indexOf("<",b),p=e.slice(b,a===-1?void 0:a);ne.test(p)&&(p=" "),(a>-1&&s+d.length>=0||p!==" ")&&d.push({type:"text",content:p})}}),i},stringify:function(e){return e.reduce(function(n,t){return n+K("",t)},"")}};const B=(e,n)=>{if(!e)return!1;const t=e.props?.children??e.children;return n?t.length>0:!!t},L=e=>{if(!e)return[];const n=e.props?.children??e.children;return e.props?.i18nIsDynamicList?S(n):n},ae=e=>Array.isArray(e)&&e.every(I),S=e=>Array.isArray(e)?e:[e],ie=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},z=(e,n)=>{if(!e)return"";let t="";const i=S(e),h=n?.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return i.forEach((s,o)=>{if(F(s))t+=`${s}`;else if(I(s)){const{props:f,type:l}=s,v=Object.keys(f).length,d=h.indexOf(l)>-1,g=f.children;if(!g&&d&&!v)t+=`<${l}/>`;else if(!g&&(!d||v)||f.i18nIsDynamicList)t+=`<${o}></${o}>`;else if(d&&v===1&&F(g))t+=`<${l}>${g}</${l}>`;else{const k=z(g,n);t+=`<${o}>${k}</${o}>`}}else if(s===null)H("Trans: the passed in value is invalid - seems you passed in a null child.");else if(D(s)){const{format:f,...l}=s,v=Object.keys(l);if(v.length===1){const d=f?`${v[0]}, ${f}`:v[0];t+=`{{${d}}}`}else H("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else H("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),t},oe=(e,n,t,i,h,s)=>{if(n==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],f=n&&new RegExp(o.map(a=>`<${a}`).join("|")).test(n);if(!e&&!f&&!s)return[n];const l={},v=a=>{S(a).forEach(u=>{F(u)||(B(u)?v(L(u)):D(u)&&!I(u)&&Object.assign(l,u))})};v(e);const d=re.parse(`<0>${n}</0>`),g={...l,...h},k=(a,p,u)=>{const x=L(a),T=c(x,p.children,u);return ae(x)&&T.length===0||a.props?.i18nIsDynamicList?x:T},b=(a,p,u,x,T)=>{a.dummy?(a.children=p,u.push(Q(a,{key:x},T?void 0:p))):u.push(...X.map([a],m=>{const r={...m.props};return delete r.i18nIsDynamicList,N(m.type,{...r,key:x,ref:m.ref},T?null:p)}))},c=(a,p,u)=>{const x=S(a);return S(p).reduce((m,r,A)=>{const j=r.children?.[0]?.content&&t.services.interpolator.interpolate(r.children[0].content,g,t.language);if(r.type==="tag"){let E=x[parseInt(r.name,10)];u.length===1&&!E&&(E=u[0][r.name]),E||(E={});const y=Object.keys(r.attrs).length!==0?ie({props:r.attrs},E):E,C=I(y),w=C&&B(r,!0)&&!r.voidElement,V=f&&D(y)&&y.dummy&&!C,M=D(e)&&Object.hasOwnProperty.call(e,r.name);if(F(y)){const $=t.services.interpolator.interpolate(y,g,t.language);m.push($)}else if(B(y)||w){const $=k(y,r,u);b(y,$,m,A)}else if(V){const $=c(x,r.children,u);b(y,$,m,A)}else if(Number.isNaN(parseFloat(r.name)))if(M){const $=k(y,r,u);b(y,$,m,A,r.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(r.name)>-1)if(r.voidElement)m.push(N(r.name,{key:`${r.name}-${A}`}));else{const $=c(x,r.children,u);m.push(N(r.name,{key:`${r.name}-${A}`},$))}else if(r.voidElement)m.push(`<${r.name} />`);else{const $=c(x,r.children,u);m.push(`<${r.name}>${$}</${r.name}>`)}else if(D(y)&&!C){const $=r.children[0]?j:null;$&&m.push($)}else b(y,j,m,A,r.children.length!==1||!j)}else if(r.type==="text"){const E=i.transWrapTextNodes,y=s?i.unescape(t.services.interpolator.interpolate(r.content,g,t.language)):t.services.interpolator.interpolate(r.content,g,t.language);E?m.push(N(E,{key:`${r.name}-${A}`},y)):m.push(y)}return m},[])},O=c([{dummy:!0,children:e||[]}],d,S(e||[]));return L(O[0])};function le({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s={},values:o,defaults:f,components:l,ns:v,i18n:d,t:g,shouldUnescape:k,...b}){const c=d||W();if(!c)return q("You will need to pass in an i18next instance by using i18nextReactModule"),e;const O=g||c.t.bind(c)||(C=>C),a={...G(),...c.options?.react};let p=v||O.ns||c.options?.defaultNS;p=F(p)?[p]:p||["translation"];const u=z(e,a),x=f||u||a.transEmptyNodeValue||i,{hashTransKey:T}=a,m=i||(T?T(u||x):u||x);c.options?.interpolation?.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...c.options.interpolation.defaultVariables}:{...c.options.interpolation.defaultVariables});const r=o||n!==void 0&&!c.options?.interpolation?.alwaysFormat||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},A={...s,context:h||s.context,count:n,...o,...r,defaultValue:x,ns:p},j=m?O(m,A):x;l&&Object.keys(l).forEach(C=>{const w=l[C];if(typeof w.type=="function"||!w.props||!w.props.children||j.indexOf(`${C}/>`)<0&&j.indexOf(`${C} />`)<0)return;function V(){return N(J,null,w)}l[C]=N(V)});const E=oe(l||e,j,c,a,A,k),y=t??a.defaultTransParent;return y?N(y,b,E):E}function pe({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s={},values:o,defaults:f,components:l,ns:v,i18n:d,t:g,shouldUnescape:k,...b}){const{i18n:c,defaultNS:O}=Y(U)||{},a=d||c||W(),p=g||a?.t.bind(a);return le({children:e,count:n,parent:t,i18nKey:i,context:h,tOptions:s,values:o,defaults:f,components:l,ns:v||p?.ns||O||a?.options?.defaultNS,i18n:a,t:g,shouldUnescape:k,...b})}export{pe as T};
//# sourceMappingURL=Trans-BgoI7Vgw.js.map
