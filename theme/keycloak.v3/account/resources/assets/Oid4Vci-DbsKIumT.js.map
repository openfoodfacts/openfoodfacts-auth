{"version":3,"file":"Oid4Vci-DbsKIumT.js","sources":["../../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.0/node_modules/@patternfly/react-styles/css/components/ActionList/action-list.mjs","../../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@patternfly/react-core/dist/esm/components/ActionList/ActionList.js","../../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@patternfly/react-core/dist/esm/components/ActionList/ActionListItem.js","../../../../../../../../../../node_modules/.pnpm/@patternfly+react-styles@5.4.0/node_modules/@patternfly/react-styles/css/components/List/list.mjs","../../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@patternfly/react-core/dist/esm/components/List/List.js","../../../../../../../../../../node_modules/.pnpm/@patternfly+react-core@5.4.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@patternfly/react-core/dist/esm/components/List/ListItem.js","../../../../../../../src/oid4vci/Oid4Vci.tsx"],"sourcesContent":["import './action-list.css';\nexport default {\n  \"actionList\": \"pf-v5-c-action-list\",\n  \"actionListGroup\": \"pf-v5-c-action-list__group\",\n  \"modifiers\": {\n    \"icons\": \"pf-m-icons\"\n  }\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/ActionList/action-list.mjs';\nexport const ActionList = (_a) => {\n    var { children, isIconList, className = '' } = _a, props = __rest(_a, [\"children\", \"isIconList\", \"className\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(styles.actionList, isIconList && styles.modifiers.icons, className) }, props), children));\n};\nActionList.displayName = 'ActionList';\n//# sourceMappingURL=ActionList.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/ActionList/action-list.mjs';\nexport const ActionListItem = (_a) => {\n    var { children, className = '' } = _a, props = __rest(_a, [\"children\", \"className\"]);\n    return (React.createElement(\"div\", Object.assign({ className: css(`${styles.actionList}__item`, className) }, props), children));\n};\nActionListItem.displayName = 'ActionListItem';\n//# sourceMappingURL=ActionListItem.js.map","import './list.css';\nexport default {\n  \"list\": \"pf-v5-c-list\",\n  \"listItem\": \"pf-v5-c-list__item\",\n  \"listItemIcon\": \"pf-v5-c-list__item-icon\",\n  \"modifiers\": {\n    \"iconLg\": \"pf-m-icon-lg\",\n    \"plain\": \"pf-m-plain\",\n    \"inline\": \"pf-m-inline\",\n    \"bordered\": \"pf-m-bordered\"\n  }\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/List/list.mjs';\nimport { css } from '@patternfly/react-styles';\nexport var OrderType;\n(function (OrderType) {\n    OrderType[\"number\"] = \"1\";\n    OrderType[\"lowercaseLetter\"] = \"a\";\n    OrderType[\"uppercaseLetter\"] = \"A\";\n    OrderType[\"lowercaseRomanNumber\"] = \"i\";\n    OrderType[\"uppercaseRomanNumber\"] = \"I\";\n})(OrderType || (OrderType = {}));\nexport var ListVariant;\n(function (ListVariant) {\n    ListVariant[\"inline\"] = \"inline\";\n})(ListVariant || (ListVariant = {}));\nexport var ListComponent;\n(function (ListComponent) {\n    ListComponent[\"ol\"] = \"ol\";\n    ListComponent[\"ul\"] = \"ul\";\n})(ListComponent || (ListComponent = {}));\nexport const List = (_a) => {\n    var { className = '', children = null, variant = null, isBordered = false, isPlain = false, iconSize = 'default', type = OrderType.number, ref = null, component = ListComponent.ul } = _a, props = __rest(_a, [\"className\", \"children\", \"variant\", \"isBordered\", \"isPlain\", \"iconSize\", \"type\", \"ref\", \"component\"]);\n    return component === ListComponent.ol ? (React.createElement(\"ol\", Object.assign({ ref: ref, type: type }, (isPlain && { role: 'list' }), props, { className: css(styles.list, variant && styles.modifiers[variant], isBordered && styles.modifiers.bordered, isPlain && styles.modifiers.plain, iconSize && iconSize === 'large' && styles.modifiers.iconLg, className) }), children)) : (React.createElement(\"ul\", Object.assign({ ref: ref }, (isPlain && { role: 'list' }), props, { className: css(styles.list, variant && styles.modifiers[variant], isBordered && styles.modifiers.bordered, isPlain && styles.modifiers.plain, iconSize && iconSize === 'large' && styles.modifiers.iconLg, className) }), children));\n};\nList.displayName = 'List';\n//# sourceMappingURL=List.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/List/list.mjs';\nimport { css } from '@patternfly/react-styles';\nexport const ListItem = (_a) => {\n    var { icon = null, children = null } = _a, props = __rest(_a, [\"icon\", \"children\"]);\n    return (React.createElement(\"li\", Object.assign({ className: css(icon && styles.listItem) }, props),\n        icon && React.createElement(\"span\", { className: css(styles.listItemIcon) }, icon),\n        children));\n};\nListItem.displayName = 'ListItem';\n//# sourceMappingURL=ListItem.js.map","import { useEnvironment } from \"@keycloak/keycloak-ui-shared\";\nimport {\n  ActionList,\n  ActionListItem,\n  List,\n  ListItem,\n  MenuToggle,\n  MenuToggleElement,\n  PageSection,\n  PageSectionVariants,\n  Select,\n  SelectList,\n  SelectOption,\n} from \"@patternfly/react-core\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { getIssuer, requestVCOffer } from \"../api\";\nimport { CredentialsIssuer } from \"../api/representations\";\nimport { Page } from \"../components/page/Page\";\nimport { usePromise } from \"../utils/usePromise\";\n\nexport const Oid4Vci = () => {\n  const context = useEnvironment();\n\n  const { t } = useTranslation();\n\n  const initialSelected = t(\"verifiableCredentialsSelectionDefault\");\n\n  const [selected, setSelected] = useState<string>(initialSelected);\n  const [qrCode, setQrCode] = useState<string>(\"\");\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const [offerQRVisible, setOfferQRVisible] = useState<boolean>(false);\n  const [credentialsIssuer, setCredentialsIssuer] =\n    useState<CredentialsIssuer>();\n\n  usePromise(() => getIssuer(context), setCredentialsIssuer);\n\n  const selectOptions = useMemo(() => {\n    if (typeof credentialsIssuer !== \"undefined\") {\n      return credentialsIssuer.credential_configurations_supported;\n    }\n    return {};\n  }, [credentialsIssuer]);\n\n  const dropdownItems = useMemo(() => {\n    if (typeof selectOptions !== \"undefined\") {\n      return Array.from(Object.keys(selectOptions));\n    }\n    return [];\n  }, [selectOptions]);\n\n  useEffect(() => {\n    if (initialSelected !== selected && credentialsIssuer !== undefined) {\n      requestVCOffer(context, selectOptions[selected], credentialsIssuer).then(\n        (blob) => {\n          const reader = new FileReader();\n          reader.readAsDataURL(blob);\n          reader.onloadend = function () {\n            const result = reader.result;\n            if (typeof result === \"string\") {\n              setQrCode(result);\n              setOfferQRVisible(true);\n              setIsOpen(false);\n            }\n          };\n        },\n      );\n    }\n  }, [selected]);\n\n  const onToggleClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const toggle = (toggleRef: React.Ref<MenuToggleElement>) => (\n    <MenuToggle\n      ref={toggleRef}\n      onClick={onToggleClick}\n      isExpanded={isOpen}\n      data-testid=\"menu-toggle\"\n    >\n      {selected}\n    </MenuToggle>\n  );\n\n  return (\n    <Page\n      title={t(\"verifiableCredentialsTitle\")}\n      description={t(\"verifiableCredentialsDescription\")}\n    >\n      <PageSection isFilled variant={PageSectionVariants.light}>\n        <List isPlain>\n          <ListItem>\n            <Select\n              data-testid=\"credential-select\"\n              onOpenChange={(isOpen) => setIsOpen(isOpen)}\n              onSelect={(_event, val) => setSelected(val as string)}\n              isOpen={isOpen}\n              selected={selected}\n              toggle={toggle}\n              shouldFocusToggleOnSelect={true}\n            >\n              <SelectList>\n                {dropdownItems.map((option) => (\n                  <SelectOption\n                    key={option}\n                    value={option}\n                    data-testid={option}\n                  >\n                    {option}\n                  </SelectOption>\n                ))}\n              </SelectList>\n            </Select>\n          </ListItem>\n          <ListItem>\n            <ActionList>\n              {offerQRVisible && (\n                <ActionListItem>\n                  <img\n                    width=\"500\"\n                    height=\"500\"\n                    src={qrCode}\n                    data-testid=\"qr-code\"\n                  />\n                </ActionListItem>\n              )}\n            </ActionList>\n          </ListItem>\n        </List>\n      </PageSection>\n    </Page>\n  );\n};\n\nexport default Oid4Vci;\n"],"names":["styles$1","ActionList","_a","children","isIconList","className","props","__rest","React","css","styles","ActionListItem","OrderType","ListVariant","ListComponent","List","variant","isBordered","isPlain","iconSize","type","ref","component","ListItem","icon","Oid4Vci","context","useEnvironment","t","useTranslation","initialSelected","selected","setSelected","useState","qrCode","setQrCode","isOpen","setIsOpen","offerQRVisible","setOfferQRVisible","credentialsIssuer","setCredentialsIssuer","usePromise","getIssuer","selectOptions","useMemo","dropdownItems","useEffect","requestVCOffer","blob","reader","result","onToggleClick","toggle","toggleRef","jsx","MenuToggle","Page","PageSection","PageSectionVariants","jsxs","Select","_event","val","SelectList","option","SelectOption"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}